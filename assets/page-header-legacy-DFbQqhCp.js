!function(){const e=["onError","onSuccess"],s=["version"],t=["version"];function n(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?n(Object(t),!0).forEach((function(s){i(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}function i(e,s,t){return(s=function(e){var s=function(e,s){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,s||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==typeof s?s:s+""}(s))in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function a(e,s){if(null==e)return{};var t,n,r=function(e,s){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==s.indexOf(n))continue;t[n]=e[n]}return t}(e,s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],-1===s.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}System.register(["./chakra-legacy-RDLacvTL.js","./index-legacy-BICtTXBI.js","./react-legacy-CczY7eHI.js","./master-manager-legacy-CZBM79as.js","./change-type-modal-legacy-DPTH2oyh.js"],(function(n,i){"use strict";var o,l,c,d,h,u,p,x,g,m,j,f,b,w,y,v,S,z,C,k,O,M,E,_,N,A,H,R,W,P,T,L,I,B,Z,D,G,U,K,Y,V,F,q,J,X,Q,$,ee,se,te,ne,re,ie,ae,oe,le,ce,de,he,ue,pe,xe,ge,me,je,fe,be,we,ye,ve,Se,ze,Ce,ke,Oe,Me,Ee,_e,Ne,Ae,He,Re,We,Pe,Te,Le,Ie,Be,Ze,De,Ge,Ue,Ke,Ye,Ve,Fe,qe,Je,Xe,Qe,$e,es,ss,ts,ns,rs,is,as,os,ls,cs,ds,hs,us,ps,xs,gs,ms,js,fs,bs,ws,ys,vs,Ss,zs,Cs,ks,Os,Ms,Es,_s,Ns,As,Hs,Rs,Ws,Ps,Ts,Ls,Is,Bs,Zs,Ds,Gs;return{setters:[e=>{o=e.j,l=e.ag,c=e.M,d=e.ah,h=e.J,u=e.K,p=e.L,x=e.h,g=e.ai,m=e.N,j=e.B,f=e.aj,b=e.ak,w=e.T,y=e.al,v=e.b,S=e.q,z=e.t,C=e.O,k=e.am,O=e.an,M=e.ao,E=e.R,_=e.ap,N=e.Q,A=e.aq,H=e.ar,R=e.a2,W=e.as,P=e.at,T=e.x,L=e.au,I=e.av,B=e.aw,Z=e.a8,D=e.e,G=e.w,U=e.m,K=e.E,Y=e.ax,V=e.a7,F=e.a1,q=e.ay,J=e.az,X=e.aA,Q=e.aB,$=e.aC,ee=e.aD,se=e.aE,te=e.aF,ne=e.k,re=e.W,ie=e.U,ae=e.V},e=>{oe=e.u,le=e.r,ce=e.C,de=e.M,he=e.L,ue=e.n,pe=e.S,xe=e.R,ge=e.a,me=e.b,je=e.c,fe=e.d,be=e.e,we=e.f,ye=e.g,ve=e.h,Se=e.i,ze=e.E,Ce=e.s,ke=e.j,Oe=e.k,Me=e.m,Ee=e.l,_e=e.o,Ne=e.p,Ae=e.q,He=e.t,Re=e.v,We=e.w,Pe=e.x,Te=e.y,Le=e.z,Ie=e.A,Be=e.B,Ze=e.D,De=e.F,Ge=e.G,Ue=e.H,Ke=e.I,Ye=e.J,Ve=e.K,Fe=e.N,qe=e.O,Je=e.P,Xe=e.Q,Qe=e.T,$e=e.U,es=e.V,ss=e.W,ts=e.X,ns=e.Y,rs=e.Z,is=e._,as=e.$,os=e.a0,ls=e.a1,cs=e.a2,ds=e.a3,hs=e.a4,us=e.a5,ps=e.a6,xs=e.a7,gs=e.a8,ms=e.a9,js=e.aa,fs=e.ab,bs=e.ac,ws=e.ad,ys=e.ae,vs=e.af,Ss=e.ag,zs=e.ah,Cs=e.ai,ks=e.aj,Os=e.ak,Ms=e.al,Es=e.am,_s=e.an,Ns=e.ao},e=>{As=e.u,Hs=e.b,Rs=e.a,Ws=e.T},e=>{Ps=e.d,Ts=e.m,Ls=e.a,Is=e.i,Bs=e.s,Zs=e.u,Ds=e.M},e=>{Gs=e.C}],execute:function(){n("default",(function(){return o.jsxs(o.Fragment,{children:[o.jsx(ln,{}),o.jsx(cn,{})]})}));var i=function(e){return oe(le.ready(),e)},Us={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ja:"英語",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ja:"韓国語",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},zh:{en:"Chinese",ja:"中国語",ko:"중국어",zh:"中文","zh-Hans":"中文","zh-Hant":"中文"},"zh-Hans":{en:"Simplified Chinese",ja:"中国語（簡体字）",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ja:"中国語（繁体字）",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}};const Ks=e=>{const{isOpen:s,onClose:t}=e,{t:n}=As(),r=le.getAppVersion();return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:n("header.about.title")}),o.jsx(u,{}),o.jsxs(p,{paddingBottom:10,children:[o.jsxs(x,{direction:"row",children:[o.jsx(g,{boxSize:"128px",src:"/rmp//logo192.png"}),o.jsxs(x,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[o.jsx(m,{fontSize:"xl",as:"b",children:n("header.about.rmp")}),o.jsx(m,{children:r}),o.jsx(m,{}),o.jsx(m,{fontSize:"sm",children:n("header.about.railmapgen")})]})]}),o.jsx(j,{margin:5,children:o.jsx(m,{fontSize:"xl",children:n("header.about.desc")})}),o.jsx(f,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.about.contributors")}),o.jsx(f,{as:"h6",size:"xs",my:2,children:n("header.about.coreContributors")}),o.jsxs(b,{children:[o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),o.jsx(m,{fontSize:"sm",children:n("header.about.content1")}),o.jsx(m,{fontSize:"sm",align:"right",mb:1,children:n("header.about.content2")})]})]}),o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/langonginc","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),o.jsx(m,{fontSize:"sm",children:n("header.about.langonginc")}),o.jsx(m,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),o.jsx(f,{as:"h6",size:"xs",my:2,children:n("header.about.styleContributors")}),o.jsxs(b,{children:[o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/203IhzElttil","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),o.jsx(m,{fontSize:"sm",mb:1,children:n("header.about.203IhzElttil")})]})]}),o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Swiftiecott","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"https://github.com/Swiftiecott.png",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Swiftiecott"}),o.jsx(m,{fontSize:"sm",mb:1,children:n("header.about.Swiftiecott")})]})]}),o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Minwtraft","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"https://github.com/Minwtraft.png",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Minwtraft"}),o.jsx(m,{fontSize:"sm",mb:1,children:n("header.about.Minwtraft")})]})]})]}),o.jsx(f,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.about.contactUs")}),o.jsxs(b,{children:[o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"data:image/svg+xml,%3csvg%20width='98'%20height='96'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M48.854%200C21.839%200%200%2022%200%2049.217c0%2021.756%2013.993%2040.172%2033.405%2046.69%202.427.49%203.316-1.059%203.316-2.362%200-1.141-.08-5.052-.08-9.127-13.59%202.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015%204.934.326%207.523%205.052%207.523%205.052%204.367%207.496%2011.404%205.378%2014.235%204.074.404-3.178%201.699-5.378%203.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283%200-5.378%201.94-9.778%205.014-13.2-.485-1.222-2.184-6.275.486-13.038%200%200%204.125-1.304%2013.426%205.052a46.97%2046.97%200%200%201%2012.214-1.63c4.125%200%208.33.571%2012.213%201.63%209.302-6.356%2013.427-5.052%2013.427-5.052%202.67%206.763.97%2011.816.485%2013.038%203.155%203.422%205.015%207.822%205.015%2013.2%200%2018.905-11.404%2023.06-22.324%2024.283%201.78%201.548%203.316%204.481%203.316%209.126%200%206.6-.08%2011.897-.08%2013.526%200%201.304.89%202.853%203.316%202.364%2019.412-6.52%2033.405-24.935%2033.405-46.691C97.707%2022%2075.788%200%2048.854%200z'%20fill='%2324292f'/%3e%3c/svg%3e",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.about.github")}),o.jsx(m,{fontSize:"sm",children:n("header.about.githubContent")})]})]}),o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2023.0.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20270%20270'%20style='enable-background:new%200%200%20270%20270;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23E01E5A;}%20.st1{fill:%2336C5F0;}%20.st2{fill:%232EB67D;}%20.st3{fill:%23ECB22E;}%20%3c/style%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z'/%3e%3cpath%20class='st0'%20d='M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9%20s-12.9-5.8-12.9-12.9V151.2z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st1'%20d='M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z'/%3e%3cpath%20class='st1'%20d='M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9%20s5.8-12.9,12.9-12.9H118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st2'%20d='M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z'/%3e%3cpath%20class='st2'%20d='M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9%20c7.1,0,12.9,5.8,12.9,12.9V118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st3'%20d='M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z'/%3e%3cpath%20class='st3'%20d='M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9%20c0,7.1-5.8,12.9-12.9,12.9H151.2z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.about.slack")}),o.jsx(m,{fontSize:"sm",children:n("header.about.slackContent")}),o.jsx(m,{fontSize:"sm",as:"i",children:"#rmp, #gallery, #rmg, #palette-and-templates"})]})]})]}),o.jsx(f,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.donation.title")}),o.jsxs(b,{children:[o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://afdian.com/a/rail-map-toolkit","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"data:image/png;base64,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",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",pb:1,children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.donation.afdian")}),o.jsx(m,{fontSize:"sm",children:n("header.donation.viaCNY")})]})]}),o.jsxs(w,{size:"lg",w:"85%",onClick:()=>window.open("https://opencollective.com/rail-map-toolkit","_blank"),cursor:"pointer",children:[o.jsx(y,{src:"/rmp/assets/opencollective-icon-Ciasch0w.webp",size:"lg",my:2,ml:-1,mr:2}),o.jsxs(v,{display:"block",width:"100%",pb:1,children:[o.jsx(m,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.donation.openCollective")}),o.jsx(m,{fontSize:"sm",children:n("header.donation.viaUSD")})]})]})]})]})]})]})};
/*!
             * canvas-size
             * v2.0.0
             * https://github.com/jhildenbiddle/canvas-size
             * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
             * MIT license
             */
function Ys(e){const s=e.sizes.shift(),t=Math.max(Math.ceil(s[0]),1),n=Math.max(Math.ceil(s[1]),1),r=[t-1,n-1,1,1],i=performance.now(),a="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;let o,l;a?(o=new OffscreenCanvas(1,1),l=new OffscreenCanvas(t,n)):(o=document.createElement("canvas"),o.width=1,o.height=1,l=document.createElement("canvas"),l.width=t,l.height=n);const c=o.getContext("2d"),d=l.getContext("2d");d&&(d.fillRect.apply(d,r),c.drawImage(l,t-1,n-1,1,1,0,0,1,1));const h=c&&0!==c.getImageData(0,0,1,1).data[3],u=parseInt(performance.now()-i);return[o,l].forEach((e=>{e.height=0,e.width=0})),a?(postMessage({width:t,height:n,testTime:u,isTestPass:h}),!h&&e.sizes.length&&setTimeout((()=>{Ys(e)}),0)):h?e.onSuccess({width:t,height:n,testTime:u}):(e.onError({width:t,height:n,testTime:u}),e.sizes.length&&setTimeout((()=>{Ys(e)}),0)),h}const Vs={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},Fs={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},qs={};function Js(e){const s=e.width===e.height,t=1===e.height,n=1===e.width,r=[];if(e.width&&e.height){const i=e.min||Fs.min,a=e.step||Fs.step;let o=Math.max(e.width,e.height);for(;o>=i;){const e=s||t?o:1,i=s||n?o:1;r.push([e,i]),o-=a}}else e.sizes.forEach((e=>{const i=s||t?e:1,a=s||n?e:1;r.push([i,a])}));return r}function Xs(s){const t="undefined"!=typeof window,n=t&&"Promise"in window,i=t&&"HTMLCanvasElement"in window,o=t&&"OffscreenCanvas"in window,l=URL.createObjectURL(new Blob([])).slice(-36),c=performance.now(),{onError:d,onSuccess:h}=s,u=a(s,e),p=()=>parseInt(performance.now()-c);let x=null;if(!i)return!1;if(s.useWorker&&o){const e=`\n            var canvasTest = ${Ys.toString()};\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        `,s=new Blob([e],{type:"application/javascript"}),t=URL.createObjectURL(s);x=new Worker(t),URL.revokeObjectURL(t),x.onmessage=function(e){const{width:s,height:t,testTime:n,isTestPass:r}=e.data,i={width:s,height:t,testTime:n,totalTime:p()};r?(qs[l].onSuccess(i),delete qs[l]):qs[l].onError(i)}}return n?new Promise((e=>{const t=r(r({},s),{},{onError(t){let{width:n,height:i,testTime:a}=t;const o={width:n,height:i,testTime:a,totalTime:p()};let l;if(0===s.sizes.length)l=!0;else{const[[e,t]]=s.sizes.slice(-1);l=n===e&&i===t}d(o),l&&e(r(r({},o),{},{success:!1}))},onSuccess(s){let{width:t,height:n,testTime:i}=s;const a={width:t,height:n,testTime:i,totalTime:p()};h(a),e(r(r({},a),{},{success:!0}))}});if(x){const{onError:e,onSuccess:s}=t;qs[l]={onError:e,onSuccess:s},x.postMessage(u)}else Ys(t)})):x?(qs[l]={onError:d,onSuccess:h},void x.postMessage(u)):Ys(s)}const Qs={maxArea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Js({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...Vs.area]});return Xs(r(r(r({},Fs),e),{},{sizes:s}))},maxHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Js({width:1,height:e.max,min:e.min,step:e.step,sizes:[...Vs.height]});return Xs(r(r(r({},Fs),e),{},{sizes:s}))},maxWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Js({width:e.max,height:1,min:e.min,step:e.step,sizes:[...Vs.width]});return Xs(r(r(r({},Fs),e),{},{sizes:s}))},test(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=r(r({},Fs),e);return s.sizes=[...s.sizes],s.width&&s.height&&(s.sizes=[[s.width,s.height]]),Xs(s)}};var $s=(e=>(e.left="l",e.right="r",e))($s||{}),et=(e=>(e.through="through",e.nonThrough="nonthrough",e))(et||{}),st=(e=>(e.local="local",e.express="express",e.direct="direct",e))(st||{}),tt=(e=>(e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro",e))(tt||{}),nt=(e=>(e.sh="sh",e.sh2020="sh2020",e))(nt||{});const rt=new Set,it=new Set,at=new Set,ot=new Set,lt=new Map,ct=new Map,dt=new Set,ht=new Map,ut=new Map;let pt=[],xt=0;const gt=new Map,mt=new Map,jt=new Set,ft={localisedName:{en:"LEFT END"},num:"00",services:[st.local],parents:[],children:["lineend"],transfer:{groups:[{}],tick_direc:$s.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355,character_spacing:0},bt={localisedName:{en:"RIGHT END"},num:"00",services:[st.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:$s.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355,character_spacing:0},wt={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:tt.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:$s.right,platform_num:"1",theme:[ce.Shanghai,"sh1","#E3002B",de.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:nt.sh,direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1},coachNum:"1"},yt={localisedName:{},num:"",services:[st.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:$s.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355,character_spacing:0},vt=e=>`${e[0]}/${e[1]}=${e[2]}${e[3]}`,St=e=>he.includes(e),zt=(e,s)=>{const[t,n]=e.extremities(s),r=e.getEdgeAttributes(s),i=r.style;if(t!=n&&St(i)){const e=(e=>{if(St(e.style))return structuredClone(e[e.style].color)})(r);ot.has(vt(e))||(at.add(e),ot.add(vt(e)),lt.set(e,t),ct.set(vt(e),new Set)),ct.get(vt(e)).add(t),ct.get(vt(e)).add(n),ut.has(t)?pt.push({target:n,next:ut.get(t),color:e}):pt.push({target:n,next:-1,color:e}),ut.set(t,xt),xt++,ut.has(n)?pt.push({target:t,next:ut.get(n),color:e}):pt.push({target:t,next:-1,color:e}),ut.set(n,xt),xt++}},Ct=(e,s,t)=>{if(ct.get(vt(t)).has(e)){ct.get(vt(t)).delete(e);for(let s=ut.get(e);-1!=s;s=pt[s].next){const n=pt[s].target,r=pt[s].color;vt(r)==vt(t)&&Ct(n,e,t)}}},kt=(e,s,t)=>{if(rt.has(e))return;rt.add(e);let n=0;const r=new Set;for(let i=ut.get(e);-1!=i;i=pt[i].next){const a=pt[i].target,o=pt[i].color;vt(o)==vt(t)&&(r.has(a)||(r.add(a),n++,a!=s&&kt(a,e,t)))}gt.set(e,n)},Ot=(e,s)=>{const t=e.stn_list.lineend.parents;t.push(s),e.stn_list.lineend.parents=structuredClone(t).reverse(),e.stn_list.lineend.branch=r(r({},e.stn_list.lineend.branch),{},{left:2==e.stn_list.lineend.parents.length?[et.through,t[1]]:void 0})},Mt=(e,s,t)=>{if(jt.has(e))return[];jt.add(e);const n=[];for(let r=ut.get(e);-1!=r;r=pt[r].next){const i=pt[r].target,a=pt[r].color;i!=s&&(vt(a)==vt(t)&&(i.startsWith("stn")?n.push(i):n.push(...Mt(i,e,t))))}return n},Et=(e,s,t,n,i,a,o)=>{if(rt.has(e)&&(!e.startsWith("misc_node_")&&null==o.stn_list[e]||e.startsWith("misc_node_")&&!it.has(e)||o.loop))return[];if(rt.has(e)&&null!=o.stn_list[e]&&((e,s)=>{let t=0;for(let n=ut.get(e);-1!=n;n=pt[n].next){pt[n].target;const e=pt[n].color;vt(e)==vt(s)&&t++}return t})(e,a)-1>=2){var l;const t=[...o.stn_list[e].parents,s];if(null==o.stn_list[t[1]]){const e=t[0];t[0]=t[1],t[1]=e}o.stn_list[e].parents=structuredClone(t).reverse(),o.stn_list[e].branch=r(r({},o.stn_list[e].branch),{},{left:[et.through,t[1]]});const n=[];for(const r of o.stn_list[e].children)r!=s&&n.push(r);o.stn_list[e].children=structuredClone(n),null===(l=o.stn_list[e].branch)||void 0===l||delete l.right;const i=[];for(const s of o.stn_list.lineend.parents)s!=e&&i.push(s);return o.stn_list.lineend.parents=structuredClone(i).reverse(),o.stn_list.lineend.branch=r(r({},o.stn_list.lineend.branch),{},{left:2==o.stn_list.lineend.parents.length?[et.through,i[1]]:void 0}),0==n.length&&(o.stn_list[e].children=["lineend"],Ot(o,e)),[e]}rt.add(e);const c=[],d=[],h=[],u=new Set,p=new Set;for(let r=ut.get(e);-1!=r;r=pt[r].next){const l=pt[r].target,d=pt[r].color;if(l!=t){if(vt(d)==vt(a)){if(p.has(l))continue;if(p.add(l),e.startsWith("misc_node_")){const t=Et(l,s,e,n+1,i,a,o);0!=t.length&&c.push(...t)}else{const s=Et(l,e,e,n+1,i,a,o);0!=s.length&&c.push(...s)}}if(!u.has(vt(d))&&vt(d)!=vt(a)){u.add(vt(d));const e={theme:d,name:[`ch_${vt(d)}`,`en_${vt(d)}`]};h.push(e)}}}if(2==c.length){for(let e=0;e<2;e++)"lineend"==c[e]&&c.splice(e,1);if(o.stn_list[c[1]].parents.length>=2){const e=c[0];c[0]=c[1],c[1]=e}}if(rt.has(e)&&null!=o.stn_list[e]){const t=[];for(const s of o.stn_list.lineend.parents)s!=e&&t.push(s);o.stn_list.lineend.parents=structuredClone(t).reverse(),o.stn_list.lineend.branch=r(r({},o.stn_list.lineend.branch),{},{left:2==o.stn_list.lineend.parents.length?[et.through,t[1]]:void 0}),0==c.length&&(jt.clear(),d.push(...Mt(e,s,a)))}if(e.startsWith("misc_node_"))return it.add(e),c;{const t=i.getNodeAttributes(e).type,l=i.getNodeAttributes(e)[t];if(o.stn_list[e]=structuredClone(yt),o.stn_list[e].localisedName={zh:l.names[0],en:l.names[1]},o.stn_list[e].num=String(n),i.getNodeAttributes(e).type==pe.GzmtrBasic){const s=l;o.stn_list[e].num=s.stationCode,""===s.secondaryNames[0]&&""===s.secondaryNames[1]||(o.stn_list[e].localisedSecondaryName={zh:s.secondaryNames[0],en:s.secondaryNames[1]})}if(i.getNodeAttributes(e).type==pe.GzmtrInt){const s=l,t=s.transfer[0];for(const n of t)if(vt(n)==vt(a)){o.stn_list[e].num=String(n[5]);break}""===s.secondaryNames[0]&&""===s.secondaryNames[1]||(o.stn_list[e].localisedSecondaryName={zh:s.secondaryNames[0],en:s.secondaryNames[1]})}return 0!=c.length?(o.stn_list[e].children=structuredClone(c).reverse(),2==c.length&&(o.stn_list[e].branch=r(r({},o.stn_list[e].branch),{},{right:[et.through,c[1]]}))):(o.stn_list[e].children=["lineend"],Ot(o,e)),d.push(s),o.stn_list[e].parents=structuredClone(d).reverse(),2==d.length&&(o.stn_list[e].branch=r(r({},o.stn_list[e].branch),{},{left:[et.through,d[1]]})),0!=h.length&&(o.stn_list[e].transfer.groups[0].lines=structuredClone(h)),[e]}},_t=(e,s,t,n)=>{const r=structuredClone(wt);let i;switch("LOOP"==n&&(r.loop=!0),e.getNodeAttributes(t).type){case pe.GzmtrBasic:case pe.GzmtrInt:i=tt.GZMTR;break;case pe.MTR:i=tt.MTR;break;default:i=tt.SHMetro}r.theme=structuredClone(s),r.style=i,r.stn_list.linestart=structuredClone(ft),r.stn_list.lineend=structuredClone(bt),rt.clear(),it.clear();const a=Et(t,"linestart","linestart",1,e,s,r);return r.current_stn_idx=a[0],r.stn_list.linestart.children=[a[0]],Object.keys(r.stn_list).length<=3||r.stn_list.lineend.parents.length>=3?void 0:structuredClone(r)},Nt=(e,s,t,n)=>{var r;e.line_name=s,e.line_num=String(t),Ps(`RMG_${r=s,""!=r[0]&&""!=r[1]?r[0]+"_"+r[1]:""!=r[0]?r[0]:""!=r[1]?r[1]:`${(new Date).valueOf()}`}.json`,"application/json",((e,s)=>{let t=e;return s.forEach(((e,s)=>{const n=new RegExp(`ch_${s}`,"g"),r=new RegExp(`en_${s}`,"g");t=t.replace(n,e[0]),t=t.replace(r,e[1])})),t})(JSON.stringify(e),n))},At={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},Ht=e=>{const{isOpen:s,onClose:t}=e,{t:n}=As(),r=Hs.useRef(window.graph),[i,a]=Hs.useState(!1),[x,g]=Hs.useState([[wt,"",""]]),[j,f]=Hs.useState(["","",""]),[b,w]=Hs.useState(new Map),[y,v]=Hs.useState(new Map),[k,O]=Hs.useState([]);Hs.useEffect((()=>{if(s){const e=(e=>{rt.clear(),at.clear(),ot.clear(),lt.clear(),ct.clear(),dt.clear(),ht.clear(),ut.clear(),pt=[],xt=0,gt.clear(),mt.clear(),e.filterEdges((e=>e.startsWith("line"))).forEach((s=>{St(e.getEdgeAttributes(s).style)&&zt(e,s)}));let s=0;e.forEachNode((e=>{mt.set(e,++s)})),mt.set("lineend",++s);const t=[];for(const i of at){let e=0;for(;0!=ct.get(vt(i)).size;){let s="line_root";ct.get(vt(i)).forEach((e=>{"line_root"==s&&(s=e)})),Ct(s,"line_root",i);const t={theme:i,index:++e};dt.add(t),ht.set(t,s)}}for(const i of dt){const{theme:s}=i;rt.clear(),gt.clear(),kt(ht.get(i),"line_root",s);let a=!0,o="LINE";const l=[];for(const[e,t]of gt)1==t&&l.push(e),3==t&&(o="BRANCH"),t>3&&(a=!1);if(!a)continue;0==l.length&&(o="LOOP",gt.forEach(((e,s)=>{l.push(s)})));const c=[];for(const t of l){const i=_t(e,s,t,o);var n,r;null!=i&&c.push([i,null!==(n=i.stn_list[i.current_stn_idx].localisedName.zh)&&void 0!==n?n:"",null!==(r=i.stn_list[i.current_stn_idx].localisedName.en)&&void 0!==r?r:""])}0!=c.length&&t.push({id:ue(10),theme:s,param:structuredClone(c),type:o})}return t})(r.current),s=new Map;e.forEach((({id:e,theme:t})=>{s.set(vt(t),e)})),O(e),w(s)}}),[s]);const M=(e,s)=>document.getElementById("2RMG_"+s+"_"+e).value.trim();return o.jsxs(l,{isOpen:s,onClose:t,size:"2xl",scrollBehavior:"inside",blockScrollOnMount:!1,children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:o.jsx(m,{as:"b",fontSize:"xl",children:n("header.download.2rmg.title")})}),o.jsx(u,{}),o.jsxs(p,{children:[o.jsx(m,{fontSize:"sm",mt:"3",lineHeight:"100%",children:n("header.download.2rmg.info1")}),o.jsx(m,{fontSize:"sm",mt:"3",lineHeight:"100%",children:n("header.download.2rmg.info2")}),o.jsx("br",{}),0===k.length?o.jsx(m,{fontSize:"md",children:n("header.download.2rmg.noline")}):o.jsx("table",{children:o.jsx("tbody",{children:k.map((({id:e,theme:s,param:t,type:r})=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx(xe,{name:"other"==s[0]&&"other"==s[1]?s[2]:s[1],bg:s[2],fg:s[3]})}),o.jsx("td",{children:o.jsx(S,{placeholder:n("header.download.2rmg.placeholder.chinese"),id:`2RMG_nameCh_${e}`,size:"sm"})}),o.jsx("td",{children:o.jsx(S,{placeholder:n("header.download.2rmg.placeholder.english"),id:`2RMG_nameEn_${e}`,size:"sm"})}),o.jsx("td",{children:o.jsx(S,{placeholder:n("header.download.2rmg.placeholder.lineCode"),id:`2RMG_lineNum_${e}`,size:"sm"})}),o.jsx("td",{children:o.jsx(xe,{name:n(`header.download.2rmg.type.${r.toLowerCase()}`),bg:At[r],fg:de.white})}),o.jsx("td",{children:o.jsx(z,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:()=>{const s=M(e,"nameCh"),n=M(e,"nameEn"),r=M(e,"lineNum"),i=new Map;b.forEach(((e,s)=>{i.set(s,[M(e,"nameCh"),M(e,"nameEn")])})),g(t),f([s,n,r]),v(i),a(!0)},size:"sm",children:o.jsx(ge,{})})})]},e)))})})]}),o.jsx(C,{children:o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:n("close")})})]}),o.jsx(Rt,{isOpen:i,onClose:()=>a(!1),param:x,nameList:j,interchangeName:y})]})},Rt=e=>{const{isOpen:s,onClose:t,param:n,nameList:r,interchangeName:i}=e,{t:a}=As(),[x,g]=Hs.useState("");return Hs.useEffect((()=>{""!=r[0]&&""!=r[1]?g(r[0]+"/"+r[1]):""!=r[0]?g(r[0]):""!=r[1]?g(r[1]):g("")}),[...r]),o.jsxs(l,{isOpen:s,onClose:t,size:"md",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:o.jsxs(m,{as:"b",fontSize:"xl",children:[a("header.download.2rmg.download")," ",x]})}),o.jsx(u,{}),o.jsx(p,{children:o.jsxs(k,{children:[o.jsx(m,{fontSize:"sm",mb:"2",lineHeight:"100%",children:a("header.download.2rmg.downloadInfo")}),n.map((([e,s,t])=>o.jsxs(z,{onClick:()=>{Nt(e,[r[0],r[1]],r[2],i)},overflow:"hidden",size:"md",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:[s.replaceAll("\n","⏎"),"/",t.replaceAll("\n","⏎")]},`${s}${t}`)))]})}),o.jsx(C,{children:o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:a("close")})})]})]})},Wt=e=>{const{isOpen:s,onClose:t}=e,{t:n}=As();return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:n("header.download.termsAndConditions")}),o.jsx(u,{}),o.jsx(p,{children:o.jsxs(O,{children:[o.jsxs(M,{children:["The layout of the elements on the signage or rail map, is designed by"," ",o.jsxs(E,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",o.jsx(_,{as:me})]}),", ",o.jsxs(E,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",o.jsx(_,{as:me})]})," or ",o.jsxs(E,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",o.jsx(_,{as:me})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",o.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",o.jsxs(E,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",o.jsx(_,{as:me})]}),"，",o.jsxs(E,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",o.jsx(_,{as:me})]}),"或",o.jsxs(E,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",o.jsx(_,{as:me})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),o.jsxs(M,{children:["The elements including shapes and lines on the image are drawn by"," ",o.jsxs(E,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",o.jsx(_,{as:me})]})," and ",o.jsxs(E,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",o.jsx(_,{as:me})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",o.jsx("br",{}),"图像的元素，包括图形及线条，均由",o.jsxs(E,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",o.jsx(_,{as:me})]}),"及",o.jsxs(E,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",o.jsx(_,{as:me})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),o.jsxs(M,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",o.jsxs(E,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",o.jsx(_,{as:me})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",o.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",o.jsxs(E,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",o.jsx(_,{as:me})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),o.jsxs(M,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",o.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),o.jsxs(M,{children:["All flag emojis shown on Windows platforms are designed by"," ",o.jsxs(E,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",o.jsx(_,{as:me})]})," ","– the open-source emoji and icon project. License:",o.jsxs(E,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",o.jsx(_,{as:me})]}),o.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",o.jsxs(E,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",o.jsx(_,{as:me})]}),"所设计。许可证：",o.jsxs(E,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",o.jsx(_,{as:me})]})]}),o.jsxs(M,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",o.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})};function Pt(){const e=N("white","var(--chakra-colors-gray-800)"),s=je(),{telemetry:{project:t}}=fe((e=>e.app)),n=fe((e=>e.param)),r=le.isAllowAnalytics(),{t:i}=As(),a=Hs.useRef(window.graph),[x,g]=Hs.useState("png"),j={png:i("header.download.png"),svg:i("header.download.svg")},[f,b]=Hs.useState(2),[w,y]=Hs.useState({width:1,height:1,benchmark:.001}),[v,S]=Hs.useState(200),k=[10,25,33,50,67,75,100,125,150,175,200,250,300,400,500,750,1e3],O=Object.fromEntries(k.map((e=>[e,`${e}%`]))),[M,B]=Hs.useState([]),[Z,D]=Hs.useState(!1),G=[{type:"select",label:i("header.download.format"),value:x,options:j,onChange:e=>g("png"===e?"png":"svg")}],U=[{type:"select",label:i("header.download.svgVersion"),value:f,options:{1.1:i("header.download.svg1.1"),2:i("header.download.svg2")},onChange:e=>{b(e),1.1===e&&X(!0)}}],K=[{type:"select",label:i("header.download.scale"),value:v,options:O,disabledOptions:M,onChange:e=>S(e)},{type:"switch",label:i("header.download.transparent"),isChecked:Z,onChange:D}],[Y,V]=Hs.useState(!1),[F,q]=Hs.useState(!1),[J,X]=Hs.useState(!1),[Q,$]=Hs.useState(!1),[ee,se]=Hs.useState(!1),[te,ne]=Hs.useState(!1);Hs.useEffect((()=>{(async()=>{const e=await Qs.maxArea({usePromise:!0,useWorker:!0});y(e)})()}),[]),Hs.useEffect((()=>{if(Y){const{xMin:e,yMin:s,xMax:t,yMax:n}=be(a.current),[r,i]=[t-e,n-s],o=k.filter((e=>r*e/100>w.width&&i*e/100>w.height));B(o)}}),[Y]);return o.jsxs(A,{id:"download",children:[o.jsx(H,{as:R,size:"sm",variant:"ghost",icon:o.jsx(ge,{})}),o.jsxs(W,{children:[o.jsx(P,{icon:o.jsx(we,{}),onClick:()=>{r&&le.event(ze.DOWNLOAD_PARAM,t?{"#nodes":a.current.order,"#edges":a.current.size}:{}),Ps(`RMP_${(new Date).valueOf()}.json`,"application/json",Ce(n))},children:i("header.download.config")}),o.jsxs(P,{icon:o.jsx(ye,{}),onClick:()=>ne(!0),children:[i("header.download.2rmg.title"),o.jsx(T,{ml:"1",colorScheme:"green",children:"New"})]}),o.jsx(P,{icon:o.jsx(ve,{}),onClick:()=>V(!0),children:i("header.download.image")})]}),o.jsxs(l,{size:"xl",isOpen:Y,onClose:()=>V(!1),children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:i("header.download.image")}),o.jsx(u,{}),o.jsxs(p,{children:[o.jsx(Se,{fields:G}),"svg"===x&&o.jsx(Se,{fields:U}),"png"===x&&o.jsx(Se,{fields:K}),"png"===x&&M.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(m,{as:"i",fontSize:"sm",children:i("header.download.disabledScaleOptions")}),o.jsx("br",{}),o.jsx(m,{as:"i",fontSize:"sm",children:i("header.download.disabledScaleOptionsWorkarounds")}),o.jsxs(E,{color:"teal.500",onClick:()=>window.open("https://github.com/RazrFalcon/resvg","_blank"),children:["RazrFalcon/resvg ",o.jsx(_,{as:me})]}),o.jsx("br",{})]}),o.jsx("br",{}),o.jsx(L,{isChecked:J,isDisabled:"svg"===x&&1.1===f,onChange:e=>X(e.target.checked),children:o.jsx(m,{children:i("header.download.useSystemFonts")})}),o.jsx(L,{isChecked:Q,onChange:e=>$(e.target.checked),children:o.jsxs(m,{children:[i("header.download.shareInfo1"),o.jsxs(E,{color:"teal.500",onClick:()=>window.open("https://railmapgen.github.io/rmp","_blank"),children:[i("header.about.rmp")," ",o.jsx(_,{as:me})]}),i("header.download.shareInfo2")]})}),o.jsx(L,{isChecked:ee,onChange:e=>se(e.target.checked),children:o.jsxs(m,{children:[i("header.download.termsAndConditionsInfo"),o.jsxs(E,{color:"teal.500",onClick:()=>q(!0),children:[i("header.download.termsAndConditions")," ",o.jsx(_,{as:me})]}),i("header.download.period")]})})]}),o.jsx(C,{children:o.jsx(I,{children:o.jsx(z,{colorScheme:"teal",variant:"outline",size:"sm",isDisabled:!ee||"png"===x&&M.includes(v),onClick:async()=>{V(!1),r&&le.event(ze.DOWNLOAD_IMAGES,t?{numberOfNodes:a.current.order,numberOfEdges:a.current.size}:{});const{elem:n,width:o,height:l}=await Ts(a.current,Q,J,f),c=n.outerHTML.replace(/&nbsp;/g," ");if("svg"===x)return void Ps(`RMP_${(new Date).valueOf()}.svg`,"image/svg+xml",c);document.body.appendChild(n);const d="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(c)));document.body.removeChild(n),n.remove();const h=document.createElement("canvas"),[u,p]=[o*v/100,l*v/100];h.width=u,h.height=p;const g=h.getContext("2d");Z||(g.fillStyle=e,g.fillRect(0,0,u,p));const m=new Image;m.onload=()=>{setTimeout((()=>{g.drawImage(m,0,0,u,p),h.toBlob((e=>{e?Ls(`RMP_${(new Date).valueOf()}.png`,e):s(ke({status:"error",message:i("header.download.imageTooBig")}))}),"image/png")}),Is()?2e3:0)},m.src=d},children:i("header.download.confirm")})})}),o.jsx(Wt,{isOpen:F,onClose:()=>q(!1)})]})]}),o.jsx(Ht,{isOpen:te,onClose:()=>ne(!1)})]})}const Tt=(e,{info_panel_type:s,line_num:t,stn_list:n,style:i,theme:a},o,l,c)=>{const d=Object.fromEntries(Object.keys(n).filter((e=>!["linestart","lineend"].includes(e))).map((e=>[e,`stn_${ue(10)}`])));Object.entries(n).filter((([e,s])=>!["linestart","lineend"].includes(e))).forEach((([s,t])=>{const n=e.filterNodes(((e,s)=>Object.values(pe).includes(s.type)&&s[s.type].names[0]===t.localisedName.zh));0!==n.length&&(d[s]=n[0])}));const h=[["linestart",-1,0]],u={};for(;h.length;){const[e,s,t]=h.shift();n[e].children.filter((e=>"lineend"!=e)).forEach(((e,n)=>{const r=Math.max(n,t+n);u[e]={x:150*s,y:75*r},h.push([e,s+1,r])}))}Object.entries(n).filter((([e,s])=>!["linestart","lineend"].includes(e))).filter((([s,t])=>0===e.filterNodes(((e,s)=>Object.values(pe).includes(s.type)&&s[s.type].names[0]===t.localisedName.zh)).length)).map((([e,n])=>{var c,h;let p=pe.ShmetroBasic;const x=n.transfer.groups,g=x.map((e=>{var s;return null!==(s=e.lines)&&void 0!==s?s:[]})).flat();i===tt.SHMetro?p=g.length>0?pe.ShmetroInt:s===nt.sh2020?pe.ShmetroBasic2020:pe.ShmetroBasic:i===tt.GZMTR?p=g.length>0?pe.GzmtrInt:pe.GzmtrBasic:i===tt.MTR&&(p=pe.MTR);const m=r(r({},structuredClone(Bs[p].defaultAttrs)),{},{names:[null!==(c=n.localisedName.zh)&&void 0!==c?c:"",null!==(h=n.localisedName.en)&&void 0!==h?h:""]});if(p===pe.ShmetroBasic2020)m.color=a;else if(p===pe.GzmtrBasic)m.color=a,m.lineCode=t,m.stationCode=n.num;else if(p===pe.GzmtrInt)m.transfer=x.map(((e,s)=>{var r,i;const o=null!==(r=null===(i=e.lines)||void 0===i?void 0:i.map((e=>{var s;return[...null!==(s=e.theme)&&void 0!==s?s:a,"1","01"]})))&&void 0!==r?r:[];return 0===s?[[...a,t,n.num],...o]:o}));else if(p===pe.MTR){var j;null!==(j=x[0].lines)&&void 0!==j&&j.length?m.transfer=[[[...a,"",""],...x[0].lines.map((e=>{var s;return[...null!==(s=e.theme)&&void 0!==s?s:a,"",""]}))]]:m.transfer=[[]]}return{node:d[e],attr:{visible:!0,zIndex:0,x:o+u[e].x,y:l+u[e].y,type:p,[p]:m}}})).forEach((({node:s,attr:t})=>e.addNode(s,t))),Object.entries(n).filter((([e,s])=>!["linestart","lineend"].includes(e))).forEach((([s,t])=>{t.children.filter((e=>!["linestart","lineend"].includes(e))).forEach((t=>{const n=Oe.Diagonal,[r,i]=[d[s],d[t]],o=c?Me(e,n,r,i,"from"):-1;e.addDirectedEdgeWithKey(`line_${ue(10)}`,r,i,{visible:!0,zIndex:0,type:n,[Oe.Diagonal]:structuredClone(_e[Oe.Diagonal].defaultAttrs),style:Ee.SingleColor,[Ee.SingleColor]:{color:a},reconcileId:"",parallelIndex:o})}))}))},Lt="rmg-bridge--",It={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function Bt(e){const{isOpen:s,onClose:t}=e,{t:n}=As(),{preference:{autoParallel:r}}=fe((e=>e.app)),{svgViewBoxZoom:i,svgViewBoxMin:a}=fe((e=>e.param)),l=je(),c=le.isAllowAnalytics(),d=Zs(),{height:h,width:u}=Ne(d),p=Rs.useRef(window.graph),[x]=Rs.useState(crypto.randomUUID()),g="/rmg/#/import?"+new URLSearchParams({parentComponent:le.getAppName(),parentId:x}),m=Rs.useCallback((()=>{l(Ae()),l(He()),l(Re(p.current.export()))}),[l,Ae,He,Re,p]);return Rs.useEffect((()=>{const e=new BroadcastChannel(Lt+x);return e.onmessage=e=>{const{event:s,data:o}=e.data;console.log("[rmp] Received event from RMG app clip:",s),"CLOSE"===s?t():"IMPORT"===s&&(e=>{try{c&&le.event(ze.IMPORT_RMG_PARAM,{});const s=a.x+u*i/100/3,t=a.y+h*i/100/3;Tt(p.current,e,s,t,r),m()}catch(s){l(ke({status:"error",message:n("header.open.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",s)}finally{t()}})(o)},()=>e.close()}),[a.x,a.y,i,h,u,r]),o.jsx(We,{isOpen:s,onClose:t,sx:It,children:o.jsx("iframe",{src:g,loading:"lazy"})})}const Zt="OPEN_TEMPLATE",Dt=new BroadcastChannel("RMP_GALLERY_CHANNEL"),Gt={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"},"& div":{h:"100%",w:"100%"}};function Ut(e){const{isOpen:t,onClose:n}=e,r=B(),{t:i}=As(),l=je(),{telemetry:{project:c}}=fe((e=>e.app)),d=le.isAllowAnalytics(),h=Hs.useRef(window.graph),u=Hs.useCallback((()=>{l(Ae()),l(He()),l(Re(h.current.export()))}),[l,Ae,He,Re,h]),p=async(e,t)=>{var n;const o=t?`https://${t}`:"",p=await(null===(n=(await Promise.allSettled([fetch(`${o}/rmp-gallery/resources/real_world/${e}.json`),fetch(`${o}/rmp-gallery/resources/fantasy/${e}.json`)])).filter((e=>"fulfilled"===e.status)).find((e=>200===e.value.status)))||void 0===n?void 0:n.value.json());if(p){if(d){const s={id:e};c&&t&&(s.host=t),le.event(ze.IMPORT_WORK_FROM_GALLERY,s)}(async e=>{const t=JSON.parse(await Pe(JSON.stringify(e))),{version:n}=t,r=a(t,s);l(Te()),h.current.clear(),h.current.import(r.graph),u();const{svgViewBoxZoom:i,svgViewBoxMin:o}=r;"number"==typeof i&&l(Le(i)),"number"==typeof o.x&&"number"==typeof o.y&&l(Ie(o))})(p),r({title:i("header.open.importFromRMPGallery",{id:e}),status:"success",duration:9e3,isClosable:!0})}else r({title:i("header.open.failToImportFromRMPGallery",{id:e}),status:"error",duration:9e3,isClosable:!0});le.updateAppMetadata({hash:""})};return Hs.useEffect((()=>{const e=new URL(window.location.href).searchParams;if(e.size>0){const s=e.keys().next().value,t=s.indexOf("."),n=s.substring(0,-1===t?void 0:t);let r;-1!==t&&(r=s.substring(t+1)),p(n,r)}}),[]),Hs.useEffect((()=>(Dt.onmessage=e=>{const{event:s,data:t}=e.data;s===Zt&&(p(t),n())},()=>Dt.close())),[]),o.jsxs(We,{isOpen:t,onClose:n,size:"full",sx:Gt,children:[o.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),o.jsx(Z,{onClick:n,position:"fixed",top:"5px",right:"15px"})]})}function Kt(){const e=je(),{t:s}=As(),n=Zs(),{height:r}=Ne(n),i=Hs.useRef(window.graph),l=Hs.useRef(null),[c,d]=Hs.useState(!1),[h,u]=Hs.useState(!1),p=Hs.useCallback((()=>{e(Ae()),e(He()),e(Re(i.current.export()))}),[e,Ae,He,Re,i]),x=async s=>{const n=JSON.parse(await Pe(s)),{version:r}=n,o=a(n,t);e(Te()),i.current.clear(),i.current.import(o.graph),p();const{svgViewBoxZoom:l,svgViewBoxMin:c}=o;"number"==typeof l&&e(Le(l)),"number"==typeof c.x&&"number"==typeof c.y&&e(Ie(c))};return Hs.useEffect((()=>{const e=async e=>{const{type:s,key:t,from:n}=e.data;if(s===Ye.SAVE_CHANGED&&t===Ve.PARAM&&"rmt"===n){Fe.debug(`Received save changed event on key: ${t}`);const e=localStorage.getItem(Ve.PARAM);if(!e)return;await x(e)}};return Be.addEventListener("message",e),()=>Be.removeEventListener("message",e)}),[]),o.jsxs(A,{children:[o.jsx(H,{as:R,size:"sm",variant:"ghost",icon:o.jsx(Ze,{})}),o.jsxs(W,{children:[o.jsx(P,{icon:o.jsx(De,{}),onClick:()=>{e(Te()),i.current.clear(),e(Le(100)),e(Ie({x:0,y:0})),p()},children:s("header.open.new")}),o.jsx("input",{id:"upload_project",ref:l,type:"file",accept:".json",hidden:!0,onChange:async t=>{var n;const r=null===(n=t.target.files)||void 0===n?void 0:n[0];if(console.log("OpenActions.handleUpload():: received file",r),"application/json"!==(null==r?void 0:r.type))e(ke({status:"error",message:s("header.open.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted.");else try{const e=await Yt(r);await x(e)}catch(i){e(ke({status:"error",message:s("header.open.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",i)}t.target.value=""},"data-testid":"file-upload"}),o.jsx(P,{icon:o.jsx(Ze,{}),onClick:()=>{var e;return null==l||null===(e=l.current)||void 0===e?void 0:e.click()},children:s("header.open.config")}),o.jsx(P,{icon:o.jsx(Ge,{}),onClick:()=>d(!0),children:s("header.open.projectRMG")}),o.jsxs(P,{icon:o.jsx(me,{}),onClick:()=>u(!0),children:[s("header.open.gallery"),o.jsx(T,{ml:"1",colorScheme:"green",children:"New"})]}),o.jsx(P,{icon:o.jsx(Ue,{}),onClick:async()=>{await x(await Ke()),e(Ie({x:-10,y:-13}));const s=Math.max(0,Math.min(400,-.132*r+117.772));e(Le(s)),le.event(ze.LOAD_TUTORIAL,{})},children:s("header.open.tutorial")})]}),o.jsx(Bt,{isOpen:c,onClose:()=>d(!1)}),o.jsx(Ut,{isOpen:h,onClose:()=>u(!1)})]})}const Yt=e=>new Promise((s=>{const t=new FileReader;t.onloadend=()=>s(t.result),t.readAsText(e)})),Vt=()=>{const[e,s]=Hs.useState(!1),{t:t}=As(),n=je(),r=Hs.useRef(window.graph),i=Zs(),{width:a,height:l}=Ne(i),[c,d]=Hs.useState([]);Hs.useEffect((()=>{e&&d(r.current.nodes().filter((e=>e.startsWith("stn"))).map((e=>{const s=r.current.getNodeAttributes(e);return{id:e,value:s[s.type].names.join("/")}})))}),[e]);return o.jsxs(D,{isOpen:e,onOpen:()=>s(!0),onClose:()=>s(!1),children:[o.jsx(G,{children:o.jsx(R,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:o.jsx(qe,{}),onClick:()=>s(!e)})}),o.jsx(U,{children:o.jsx(K,{children:o.jsx(Je,{label:t("header.search"),children:o.jsx(Xe,{data:c,displayHandler:e=>o.jsx(T,{children:e.value}),filter:(e,s)=>s.value.toLowerCase().includes(e.toLowerCase())||Object.values(s.value).some((s=>s.toLowerCase().includes(e.toLowerCase()))),value:"",onChange:e=>(e=>{n(Qe(new Set([e])));const s=Math.max(0,Math.min(400,-.132*l+117.772)),{x:t,y:i}=$e((a-300)/2,l/2,s,{x:-r.current.getNodeAttribute(e,"x"),y:-r.current.getNodeAttribute(e,"y")});n(Le(s)),n(Ie({x:-t,y:-i}))})(e.id)})})})})]})},Ft=e=>{const{isOpen:s,onClose:t}=e,n=je(),{theme:r,paletteAppClip:{output:i}}=fe((e=>e.runtime)),{t:a}=As(),x=Hs.useRef(window.graph),[g,m]=Hs.useState(r),[j,f]=Hs.useState(!1);Hs.useEffect((()=>{j&&i&&(m(i),f(!1))}),[null==i?void 0:i.toString()]);return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:a("header.settings.procedures.removeLines.title")}),o.jsx(u,{}),o.jsxs(p,{children:[a("header.settings.procedures.removeLines.content"),o.jsx(es,{theme:g,onClick:()=>{f(!0),n(ss(g))}})]}),o.jsxs(C,{children:[o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:a("cancel")}),o.jsx(z,{colorScheme:"red",onClick:()=>{x.current.filterEdges(((e,s,t,n,r,i,a)=>he.includes(s.style)&&JSON.stringify(s[s.style].color)===JSON.stringify(g))).forEach((e=>x.current.dropEdge(e))),n(He()),n(Re(x.current.export())),t()},children:a("remove")})]})]})]})},qt=e=>{const{isOpen:s,onClose:t}=e,n=je(),{t:r}=As(),i=Hs.useRef(window.graph),[a,x]=Hs.useState(1),g=[{type:"input",label:r("header.settings.procedures.scale.factor"),value:a.toString(),variant:"number",onChange:e=>x(Number(e)),minW:"full"}];return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:r("header.settings.procedures.scale.title")}),o.jsx(u,{}),o.jsxs(p,{children:[r("header.settings.procedures.scale.content"),o.jsx(Se,{fields:g})]}),o.jsxs(C,{children:[o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:r("cancel")}),o.jsx(z,{colorScheme:"red",onClick:()=>{i.current.forEachNode(((e,s)=>{i.current.updateNodeAttribute(e,"x",(e=>(null!=e?e:0)*a)),i.current.updateNodeAttribute(e,"y",(e=>(null!=e?e:0)*a))})),n(Ae()),n(He()),n(Re(i.current.export())),t()},children:r("apply")})]})]})]})},Jt=e=>{const{isOpen:s,onClose:t}=e,n=je(),{t:r}=As(),i=Hs.useRef(window.graph),[a,x]=Hs.useState(0),[g,m]=Hs.useState(0),j=[{type:"input",label:r("header.settings.procedures.translate.x"),value:a.toString(),variant:"number",onChange:e=>x(Number(e)),minW:"full"},{type:"input",label:r("header.settings.procedures.translate.y"),value:g.toString(),variant:"number",onChange:e=>m(Number(e)),minW:"full"}];return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:r("header.settings.procedures.translate.title")}),o.jsx(u,{}),o.jsxs(p,{children:[r("header.settings.procedures.translate.content"),o.jsx(Se,{fields:j})]}),o.jsxs(C,{children:[o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:r("cancel")}),o.jsx(z,{colorScheme:"red",onClick:()=>{i.current.forEachNode(((e,s)=>{i.current.updateNodeAttribute(e,"x",(e=>(null!=e?e:0)+a)),i.current.updateNodeAttribute(e,"y",(e=>(null!=e?e:0)+g))})),n(Ae()),n(He()),n(Re(i.current.export())),t()},children:r("apply")})]})]})]})},Xt=e=>{const{isOpen:s,onClose:t}=e,n=je(),{preference:{unlockSimplePathAttempts:r}}=fe((e=>e.app)),{activeSubscriptions:i}=fe((e=>e.account)),{t:a}=As();return o.jsxs(l,{isOpen:s,onClose:t,size:"5xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:a("header.settings.procedures.unlockSimplePath.title")}),o.jsx(u,{}),o.jsxs(p,{children:[o.jsx(m,{mb:"2",children:a("header.settings.procedures.unlockSimplePath.content1")}),o.jsx(m,{mb:"2",children:a("header.settings.procedures.unlockSimplePath.content2")}),o.jsx(m,{mb:"2",children:a("header.settings.procedures.unlockSimplePath.content3")})]}),o.jsx(C,{children:o.jsx(Y,{label:a("header.settings.pro"),isOpen:!i.RMP_CLOUD&&r>=0,children:o.jsx(z,{onClick:()=>{n(ts(-1))},isDisabled:!i.RMP_CLOUD||r<0,children:a(r>=0?"header.settings.procedures.unlockSimplePath.check":"header.settings.procedures.unlockSimplePath.unlocked")})})})]})]})},Qt=e=>{const{isOpen:s,onClose:t}=e,n=je(),r=B(),{t:i}=As(),a=Hs.useRef(window.graph),[x,g]=Hs.useState(!1);return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:i("header.settings.procedures.updateColor.title")}),o.jsx(u,{}),o.jsx(p,{children:o.jsx(m,{children:i("header.settings.procedures.updateColor.content")})}),o.jsxs(C,{children:[o.jsx(z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),o.jsx(z,{colorScheme:"red",onClick:async()=>{g(!0);const e=JSON.stringify(a.current.export());try{const s=await sn(e);a.current.clear(),a.current.import(s),n(Ae()),n(He()),n(Re(a.current.export())),r({title:i("header.settings.procedures.updateColor.success"),status:"success",duration:9e3,isClosable:!0})}catch(s){console.error(`[rmp] Error in updating all colors: ${s}`),r({title:i("header.settings.procedures.updateColor.error",{e:s}),status:"error",duration:9e3,isClosable:!0})}g(!1),t()},isLoading:x,children:i("apply")})]})]})]})},$t=e=>e.length>=4&&e.every((e=>"string"==typeof e))&&!!e[2].match(/^#[0-9a-fA-F]{6}$/)&&Object.values(de).includes(e[3]),en=(e,s,t)=>{const n=s.split(".");let r=e;for(let i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},sn=async e=>{const s=JSON.parse(e),t=(new Date).getTime(),n=(e=>{const s=[],t=(e,n)=>{if(Array.isArray(e)&&$t(e))s.push({path:n||"",value:e});else for(const r in e){const i=e[r],a=n?`${n}.${r}`:r;Array.isArray(i)?$t(i)?s.push({path:a,value:i}):i.forEach(((e,s)=>t(e,`${a}.${s}`))):i&&"object"==typeof i&&t(i,a)}};return t(e),s})(s);console.log("[rmp] Found all themes pending for update",n);let r,i=!1;const a=new Promise(((e,t)=>{r=setTimeout((()=>{i=!0,t("Executing time exceeds 10000ms")}),1e4),(async()=>{for(const{path:e,value:t}of n){if(i)throw new Error("Update aborted");const[n,r,a,o,...l]=t,c=await ns([n,r,a,o]);en(s,e,[...c,...l])}})().then(e).catch(t)}));try{return await a,console.log(`[rmp] Themes update completed, elapsed time ${((new Date).getTime()-t)/1e3} sec`),s}finally{clearTimeout(r)}},tn=()=>{const e=je(),{state:s,token:t}=fe((e=>e.account)),{t:n}=As(),[r,i]=Hs.useState(!1),[a,l]=Hs.useState(1);Hs.useEffect((()=>{let e;return r&&a>0?e=window.setTimeout((()=>{l(a-1)}),1e3):0===a&&i(!1),()=>clearTimeout(e)}),[r,a]);const c={"logged-out":n("header.settings.subscription.logged-out"),free:n("header.settings.subscription.free"),subscriber:n("header.settings.subscription.subscriber"),expired:n("header.settings.subscription.expired")};return o.jsxs(j,{width:"100%",mb:"3",children:[o.jsx(m,{as:"b",fontSize:"xl",children:n("header.settings.subscription.title")}),o.jsx(j,{mt:"3",children:o.jsxs(j,{display:"flex",mb:"1",children:[o.jsx(m,{flex:"1",children:c[s]}),o.jsx(R,{"aria-label":"refresh",variant:"ghost",size:"sm",icon:o.jsx(rs,{}),isDisabled:r,onClick:()=>(i(!0),l(1),void(t&&is(e,t)))})]})})]})},nn={width:"100%",justifyContent:"space-between"},rn={fontFamily:"-apple-system"},an=e=>{const{isOpen:s,onClose:t}=e,{activeSubscriptions:n}=fe((e=>e.account)),{telemetry:{project:r},preference:{autoParallel:i,randomStationsNames:a}}=fe((e=>e.app)),{keepLastPath:x,parallelLinesCount:g}=fe((e=>e.runtime)),f=je(),{t:w}=As(),y=N("primary.500","primary.300"),[v,S]=Hs.useState(!1),[C,k]=Hs.useState(!1),[O,M]=Hs.useState(!1),[A,H]=Hs.useState(!1),[R,W]=Hs.useState(!1),[P,L]=Hs.useState(!1),[I,B]=Hs.useState(!1),Z=le.isAllowAnalytics(),D=g>=(n.RMP_CLOUD?as:os),G=!n.RMP_CLOUD;return o.jsxs(l,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[o.jsx(c,{}),o.jsxs(d,{children:[o.jsx(h,{children:w("header.settings.title")}),o.jsx(u,{}),o.jsx(p,{children:o.jsxs(b,{divider:o.jsx(te,{borderColor:"gray.200"}),children:[o.jsx(tn,{}),o.jsxs(j,{width:"100%",mb:"3",children:[o.jsx(m,{as:"b",fontSize:"xl",children:w("header.settings.preference.title")}),o.jsxs(j,{mt:"3",children:[o.jsxs(j,{display:"flex",mb:"1",children:[o.jsx(m,{flex:"1",children:w("header.settings.preference.keepLastPath")}),o.jsx(V,{isChecked:x,onChange:({target:{checked:e}})=>f(ls(e))})]}),o.jsxs(j,{display:"flex",mb:"1",children:[o.jsx(m,{children:w("header.settings.preference.autoParallel")}),o.jsx(T,{ml:"auto",colorScheme:"green",children:"New"}),o.jsx(Y,{label:w("header.settings.proWithTrial"),children:o.jsx(T,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})}),o.jsx(V,{ml:"1",isDisabled:D,isChecked:i,onChange:({target:{checked:e}})=>f(cs(e))})]}),o.jsxs(j,{mb:"1",display:"flex",children:[o.jsx(m,{flex:"1",children:w("header.settings.preference.randomStationNames.title")}),o.jsx(T,{ml:"auto",colorScheme:"green",children:"New"}),o.jsx(Y,{label:w("header.settings.pro"),children:o.jsx(T,{color:"gray.50",ml:"1",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})}),o.jsxs(F,{size:"xs",width:"auto",ml:"1",value:a,onChange:e=>{f(js(e.target.value))},children:[o.jsx("option",{value:"none",children:w("header.settings.preference.randomStationNames.none")}),o.jsx("option",{value:ds.Shmetro,disabled:G,children:w(`header.settings.preference.randomStationNames.${ds.Shmetro}`)}),o.jsx("option",{value:ds.Bjsubway,disabled:G,children:w(`header.settings.preference.randomStationNames.${ds.Bjsubway}`)})]})]})]})]}),o.jsxs(j,{width:"100%",mb:"3",children:[o.jsx(m,{as:"b",fontSize:"xl",children:w("header.settings.procedures.title")}),o.jsxs(j,{mt:"3",children:[o.jsx(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>S(!0),children:w("header.settings.procedures.translate.title")}),o.jsx(Jt,{isOpen:v,onClose:()=>S(!1)}),o.jsx(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>k(!0),children:w("header.settings.procedures.scale.title")}),o.jsx(qt,{isOpen:C,onClose:()=>k(!1)}),o.jsxs(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>M(!0),children:[w("header.settings.procedures.changeType.title"),o.jsx(Y,{label:w("header.settings.pro"),children:o.jsx(T,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),o.jsx(Gs,{isOpen:O,onClose:()=>M(!1),isSelect:!1}),o.jsx(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>H(!0),children:w("header.settings.procedures.removeLines.title")}),o.jsx(Ft,{isOpen:A,onClose:()=>H(!1)}),o.jsx(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>W(!0),children:w("header.settings.procedures.updateColor.title")}),o.jsx(Qt,{isOpen:R,onClose:()=>W(!1)}),o.jsxs(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>L(!0),children:[w("header.settings.procedures.unlockSimplePath.title"),o.jsx(Y,{label:w("header.settings.pro"),children:o.jsx(T,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),o.jsx(Xt,{isOpen:P,onClose:()=>L(!1)}),o.jsx(z,{sx:nn,rightIcon:o.jsx(hs,{}),onClick:()=>B(!0),children:w("header.settings.procedures.masterManager.title")}),o.jsx(Ds,{isOpen:I,onClose:()=>B(!1)})]})]}),o.jsxs(j,{width:"100%",mb:"3",children:[o.jsx(m,{as:"b",fontSize:"xl",children:w("header.settings.shortcuts.title")}),o.jsx(j,{mt:"3",children:o.jsxs(q,{children:[o.jsx(J,{children:o.jsxs(X,{children:[o.jsx(Q,{children:w("header.settings.shortcuts.keys")}),o.jsx(Q,{children:w("header.settings.shortcuts.description")})]})}),o.jsxs($,{children:[o.jsxs(X,{children:[o.jsx(ee,{children:o.jsx(se,{children:"f"})}),o.jsx(ee,{children:w("header.settings.shortcuts.f")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:o.jsx(se,{children:"s"})}),o.jsx(ee,{children:w("header.settings.shortcuts.s")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:o.jsxs(j,{display:"flex",flexDirection:"row",children:[o.jsx(us,{}),o.jsx(ps,{}),o.jsx(xs,{}),o.jsx(gs,{})]})}),o.jsx(ee,{children:w("header.settings.shortcuts.arrows")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:o.jsxs(j,{display:"flex",flexDirection:"row",children:[o.jsx(se,{children:"i"}),o.jsx(se,{children:"j"}),o.jsx(se,{children:"k"}),o.jsx(se,{children:"l"})]})}),o.jsx(ee,{children:w("header.settings.shortcuts.ijkl")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:ms?o.jsx(se,{sx:rn,children:"⇧"}):o.jsx(se,{children:"shift"})}),o.jsx(ee,{children:w("header.settings.shortcuts.shift")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:ms?o.jsx(se,{sx:rn,children:"⌥"}):o.jsx(se,{children:"alt"})}),o.jsx(ee,{children:w("header.settings.shortcuts.alt")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:ms?o.jsx(se,{sx:rn,children:"⌫"}):o.jsx(se,{children:"delete"})}),o.jsx(ee,{children:w("header.settings.shortcuts.delete")})]}),o.jsxs(X,{children:[o.jsxs(ee,{children:[ms?o.jsx(se,{sx:rn,children:"⌘"}):o.jsx(se,{children:"ctrl"})," + ",o.jsx(se,{children:"x"})]}),o.jsx(ee,{children:w("header.settings.shortcuts.cut")})]}),o.jsxs(X,{children:[o.jsxs(ee,{children:[ms?o.jsx(se,{sx:rn,children:"⌘"}):o.jsx(se,{children:"ctrl"})," + ",o.jsx(se,{children:"c"})]}),o.jsx(ee,{children:w("header.settings.shortcuts.copy")})]}),o.jsxs(X,{children:[o.jsxs(ee,{children:[ms?o.jsx(se,{sx:rn,children:"⌘"}):o.jsx(se,{children:"ctrl"})," + ",o.jsx(se,{children:"v"})]}),o.jsx(ee,{children:w("header.settings.shortcuts.paste")})]}),o.jsxs(X,{children:[o.jsxs(ee,{children:[ms?o.jsx(se,{sx:rn,children:"⌘"}):o.jsx(se,{children:"ctrl"})," + ",o.jsx(se,{children:"z"})]}),o.jsx(ee,{children:w("header.settings.shortcuts.undo")})]}),o.jsxs(X,{children:[o.jsx(ee,{children:ms?o.jsxs(o.Fragment,{children:[o.jsx(se,{sx:rn,children:"⇧"})," + ",o.jsx(se,{sx:rn,children:"⌘"})," + ",o.jsx(se,{children:"z"})]}):o.jsxs(o.Fragment,{children:[o.jsx(se,{children:"ctrl"})," + ",o.jsx(se,{children:"y"})]})}),o.jsx(ee,{children:w("header.settings.shortcuts.redo")})]})]})]})})]}),o.jsxs(j,{width:"100%",mb:"3",children:[o.jsx(m,{as:"b",fontSize:"xl",children:w("header.settings.telemetry.title")}),o.jsxs(j,{mt:"3",children:[o.jsx(m,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:w("header.settings.telemetry.info")}),o.jsxs(j,{mt:"3",mb:"1",children:[o.jsxs(j,{display:"flex",mb:"1",children:[o.jsx(m,{flex:"1",children:w("header.settings.telemetry.essential")}),o.jsx(Y,{label:w("header.settings.telemetry.essentialTooltip"),children:o.jsx(V,{isChecked:Z,isDisabled:!0})})]}),o.jsx(m,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:w("header.settings.telemetry.essentialInfo")}),o.jsxs(E,{color:y,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[w("header.settings.telemetry.essentialLink")," ",o.jsx(_,{as:me})]})]}),o.jsxs(j,{mt:"1",mb:"1",children:[o.jsxs(j,{display:"flex",children:[o.jsx(m,{flex:"1",children:w("header.settings.telemetry.additional")}),o.jsx(V,{isChecked:r,onChange:({target:{checked:e}})=>{f(fs(e))}})]}),o.jsx(m,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:w("header.settings.telemetry.additionalInfo")})]})]})]})]})})]})]})},on=()=>{const[e,s]=Hs.useState(!1),{svgViewBoxZoom:t}=fe((e=>e.param)),n=je(),r=[{type:"slider",label:"",value:400-t,min:10,max:390,step:1,onChange:e=>n(Le(400-e)),leftIcon:o.jsx(ws,{}),rightIcon:o.jsx(bs,{}),minW:160}];return o.jsxs(D,{isOpen:e,onOpen:()=>s(!0),onClose:()=>s(!1),children:[o.jsx(G,{children:o.jsx(R,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:o.jsx(bs,{}),onClick:()=>s(!e)})}),o.jsx(U,{children:o.jsx(K,{children:o.jsx(Se,{fields:r,noLabel:!0})})})]})};function ln(){const{t:e}=As(),s=je(),{past:t,future:n}=fe((e=>e.param)),r=le.isAllowAnalytics(),[a,l]=Hs.useState(!1),[c,d]=Hs.useState(!1),h=i(le.getEnv),u=i(le.getAppVersion);Hs.useEffect((()=>{r&&h!==ys.DEV&&le.event(ze.APP_LOAD,{isStandaloneWindow:le.isStandaloneWindow()})}),[h]);return o.jsxs(vs,{children:[o.jsx(f,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e("header.about.rmp")}),o.jsx(Ss,{environment:h,version:u,popoverHeader:h===ys.PRD?void 0:o.jsxs(Ws,{i18nKey:"header.popoverHeader",environment:h,children:["You're on ",{environment:h}," environment!"]}),popoverBody:h===ys.PRD?void 0:o.jsx(Ws,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),o.jsxs(ne,{ml:"auto",children:[o.jsx(re,{children:o.jsx(Vt,{})}),o.jsx(re,{children:o.jsx(R,{size:"sm",variant:"ghost","aria-label":"Undo",icon:o.jsx(zs,{}),isDisabled:0===t.length,onClick:()=>{s(Es()),s(Ae()),s(He())}})}),o.jsx(re,{children:o.jsx(R,{size:"sm",variant:"ghost","aria-label":"Redo",icon:o.jsx(Cs,{}),isDisabled:0===n.length,onClick:()=>{s(_s()),s(Ae()),s(He())}})}),o.jsx(re,{children:o.jsx(on,{})}),o.jsx(re,{children:o.jsx(Kt,{})}),o.jsx(re,{children:o.jsx(Pt,{})}),le.isStandaloneWindow()&&o.jsx(re,{children:o.jsxs(A,{children:[o.jsx(H,{as:R,icon:o.jsx(ks,{}),variant:"ghost",size:"sm"}),o.jsx(W,{children:["en","zh-Hans","zh-Hant","ja","ko"].map((e=>o.jsx(P,{onClick:()=>{return s=e,void le.getI18nInstance().changeLanguage(s);var s},children:Us[e][e]},e)))})]})}),o.jsx(re,{children:o.jsx(R,{size:"sm",variant:"ghost","aria-label":"Settings",icon:o.jsx(Os,{}),onClick:()=>l(!0)})}),o.jsx(re,{children:o.jsx(R,{size:"sm",variant:"ghost","aria-label":"Help",icon:o.jsx(Ms,{}),onClick:()=>d(!0)})})]}),o.jsx(an,{isOpen:a,onClose:()=>l(!1)}),o.jsx(Ks,{isOpen:c,onClose:()=>d(!1)})]})}function cn(){const e=je(),s=fe((e=>e.runtime.globalAlerts));return o.jsx(o.Fragment,{children:Object.entries(s).map((([s,{message:t,url:n,linkedApp:r}])=>o.jsxs(ie,{status:s,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[o.jsx(ae,{}),r?o.jsx(E,{onClick:()=>(e=>{le.isStandaloneWindow()?window.open(`/${e}`,"_blank"):le.openApp({appId:e})})(r),children:t}):n?o.jsx(E,{href:n,target:"_blank",children:t}):t,o.jsx(Z,{ml:"auto",onClick:()=>e(Ns(s))})]},s)))})}}}}))}();
